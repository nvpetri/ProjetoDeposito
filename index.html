<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Controle de Estoque - Depósito Leoo</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    input, select {
      border: 1px solid #ccc;
      border-radius: 0.375rem;
      padding: 0.5rem;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <h1 class="text-2xl font-bold mb-6 text-center">Controle de Estoque - Depósito Leoo</h1>

    <!-- Formulário de Cadastro -->
    <div class="bg-white p-6 rounded-xl shadow mb-8">
      <h2 class="text-xl font-semibold mb-4">Adicionar Produto</h2>
      <form id="formProduto" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <input type="text" id="nome" placeholder="Nome do produto" required>
        <select id="tipo" required>
          <option value="">Selecione o tipo</option>
          <option value="Cabos e fios">Cabos e fios</option>
          <option value="Disjuntores">Disjuntores</option>
          <option value="Tomadas">Tomadas</option>
          <option value="Lâmpadas e Luminárias">Lâmpadas e Luminárias</option>
          <option value="Interruptores">Interruptores</option>
          <option value="Eletrodutos">Eletrodutos</option>
          <option value="Quadro de distribuição">Quadro de distribuição</option>
          <option value="Outros">Outros</option>
        </select>
        <input type="number" id="quantidade" placeholder="Quantidade" required>
        <input type="number" step="0.01" id="custo" placeholder="Custo unitário" required>
        <input type="number" step="0.01" id="venda" placeholder="Valor de venda" required>
        <button type="submit" class="col-span-1 sm:col-span-2 lg:col-span-3 bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Adicionar</button>
      </form>
    </div>

    <!-- Tabela de Estoque -->
    <div class="bg-white p-4 sm:p-6 rounded-xl shadow overflow-x-auto">
      <h2 class="text-xl font-semibold mb-4">Produtos em Estoque</h2>
      <table class="min-w-full text-left border">
        <thead class="bg-gray-200">
          <tr>
            <th class="px-4 py-2 whitespace-nowrap">Produto</th>
            <th class="px-4 py-2 whitespace-nowrap">Tipo</th>
            <th class="px-4 py-2 whitespace-nowrap">Quantidade</th>
            <th class="px-4 py-2 whitespace-nowrap">Custo Unitário</th>
            <th class="px-4 py-2 whitespace-nowrap">Valor de Venda</th>
            <th class="px-4 py-2 whitespace-nowrap">Total Custo</th>
            <th class="px-4 py-2 whitespace-nowrap">Ações</th>
          </tr>
        </thead>
        <tbody id="tabelaEstoque"></tbody>
      </table>
    </div>
  </main>

  <script>
    const form = document.getElementById('formProduto');
    const tabela = document.getElementById('tabelaEstoque');

    function carregarEstoque() {
      const estoque = JSON.parse(localStorage.getItem('estoque') || '[]');
      tabela.innerHTML = '';
      estoque.forEach((item, index) => {
        const total = (item.custo * item.quantidade).toFixed(2);
        tabela.innerHTML += `
          <tr class="border-t">
            <td class="px-4 py-2 whitespace-nowrap">${item.nome}</td>
            <td class="px-4 py-2 whitespace-nowrap">${item.tipo}</td>
            <td class="px-4 py-2 whitespace-nowrap">${item.quantidade}</td>
            <td class="px-4 py-2 whitespace-nowrap">R$ ${item.custo.toFixed(2)}</td>
            <td class="px-4 py-2 whitespace-nowrap">R$ ${item.venda.toFixed(2)}</td>
            <td class="px-4 py-2 whitespace-nowrap">R$ ${total}</td>
            <td class="px-4 py-2 whitespace-nowrap">
              <button onclick="removerProduto(${index})" class="text-red-600 hover:underline">Remover</button>
            </td>
          </tr>
        `;
      });
    }

    function removerProduto(index) {
      const estoque = JSON.parse(localStorage.getItem('estoque') || '[]');
      estoque.splice(index, 1);
      localStorage.setItem('estoque', JSON.stringify(estoque));
      carregarEstoque();
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const nome = document.getElementById('nome').value;
      const tipo = document.getElementById('tipo').value;
      const quantidade = parseInt(document.getElementById('quantidade').value);
      const custo = parseFloat(document.getElementById('custo').value);
      const venda = parseFloat(document.getElementById('venda').value);

      const estoque = JSON.parse(localStorage.getItem('estoque') || '[]');
      estoque.push({ nome, tipo, quantidade, custo, venda });
      localStorage.setItem('estoque', JSON.stringify(estoque));

      form.reset();
      carregarEstoque();
    });

    window.onload = carregarEstoque;
  </script>
</body>
</html>
